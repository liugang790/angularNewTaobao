<div ng-cloak ng-show="currentUser">
	<h3 class="page-header">
		<i class="iconfont icon-user" style="font-size: 2.5em;"></i>
		<span style="font-size: 1.6em;">{{currentUser.nick ? currentUser.nick : currentUser.email}}</span>
		<div class="pull-right" style="margin-top: 3.5%;" ng-click="editStatus=true;"><i class="iconfont icon-edit"></i><span style="font-size: 0.8em;">编辑个人信息</span></div>
	</h3>

	<div class="row" style="font-size: 1.2em;" ng-hide="editStatus">
		<div class="col-md-8">
			<div class="row" style="margin-bottom: 10px;">
				<div class="col-md-3"><label class="control-label">电子邮件：</label></div>
				<div class="col-md-9"><span>{{currentUser.email}}</span></div>
			</div>
			<div class="row" style="margin-bottom: 10px;">
				<div class="col-md-3"><label class="control-label">所属企业：</label></div>
				<div class="col-md-9"><span>{{currentUser.company.name}}</span></div>
			</div>
			<div class="row" style="margin-bottom: 10px;">
				<div class="col-md-3"><label class="control-label">登录密码：</label></div>
				<div class="col-md-2"><span>**********</span></div>
				<div class="col-md-2"><button type="button" class="btn btn-sm btn-default" ng-click="updatePsw()">修改密码</button></div>
			</div>
			<div class="row" style="margin-bottom: 10px;">
				<div class="col-md-3"><label class="control-label">注册时间：</label></div>
				<div class="col-md-9"><span>{{currentUser.created}}</span></div>
			</div>
		</div>
	</div>

	<div class="row" style="font-size: 1.2em;" ng-show="editStatus">
		<form class="form-horizontal" name="form">
			<div class="col-md-8 form-group" style="margin-bottom: 10px;" show-errors>
	            <div class="col-md-3"><label class="control-label">昵称：</label></div>
	            <div class="col-md-9"><input class="form-control" type="text" name="nick" ng-model="currentUser.nick" ng-maxlength="20"></div>
	        </div>
			<div class="col-md-8 form-group" show-errors>
				<div class="col-md-3"><label class="control-label">电子邮件：</label></div>
				<div class="col-md-9"><input class="form-control" type="email" name="email" ng-model="currentUser.email"></div>
			</div>
			<div class="col-md-4 pull-right button-group">
				<button class="btn btn-default" type="button" ng-click="editStatus=false;">取消修改</button>
				<button 
					class="btn btn-info" 
					type="button" 
					ng-click="editProfile()" 
					ng-disabled="form.$invalid || editBtnStatus==='editing'">
					<i class="fa fa-spin fa-spinner" ng-if="editBtnStatus==='editing'"></i>
					确认修改
				</button>
			</div>
		</form>
	</div>

	<div class="row" style="font-size: 1.2em;">
		<div class="col-md-12 text-info"><span style="font-size:1.5em;">
			<i class="iconfont icon-cloud" style="font-size: 1.7em;"></i> 企业信息</span></div>
		<div class="col-md-8">
			<div class="row" style="margin-bottom: 10px;">
				<div class="col-md-3"><label class="control-label">企业名称：</label></div>
				<div class="col-md-9"><span>{{currentUser.company.name}}</span></div>
			</div>
			<div class="row" style="margin-bottom: 10px;">
				<div class="col-md-3"><label class="control-label">入驻店铺数：</label></div>
				<div class="col-md-9"><span>{{shopsTotal}}</span></div>
			</div>
			<div class="row" style="margin-bottom: 10px;">
				<div class="col-md-3"><label class="control-label">商品库总数：</label></div>
				<div class="col-md-9"><span>{{productsTotal}}</span></div>
			</div>
			<div class="row" style="margin-bottom: 10px;">
				<div class="col-md-3"><label class="control-label">剩余使用时间：</label></div>
				<div class="col-md-2"><span>{{currentUser.company.remainTime/60/60/24| number:0}}天</span></div>
				<div class="col-md-2"><a class="btn btn-sm btn-default" ng-href="/payment">续费</a></div>
			</div>
		</div>
	</div>
</div>
<div ng-hide="currentUser">
	<span class="col-md-8 col-md-offset-2 alert alert-info text-center"><i class="fa fa-spinner fa-spin"></i>正在加载，请稍候...</span>
</div>